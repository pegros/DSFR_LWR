<template>
    <!-- Collapsible variant display -->
    <template lwc:if={isCollapsible}>
        <section class="fr-accordion">
            <template lwc:if={isH2}>
                <h2 class="fr-accordion__title">
                    <button class="fr-accordion__btn"   aria-label={ariaLabel}
                            aria-controls="accordion"   aria-expanded={ariaExpanded}
                            onclick={expandCollapse}>
                        {title}
                    </button>
                </h2>
            </template>
            <template lwc:elseif={isH1}>
                <h1 class="fr-accordion__title">
                    <button class="fr-accordion__btn"   aria-label={ariaLabel}
                            aria-controls="accordion"   aria-expanded={ariaExpanded}
                            onclick={expandCollapse}>
                        {title}
                    </button>
                </h1>
            </template>
            <template lwc:elseif={isH3}>
                <h3 class="fr-accordion__title">
                    <button class="fr-accordion__btn"   aria-label={ariaLabel}
                            aria-controls="accordion"   aria-expanded={ariaExpanded}
                            onclick={expandCollapse}>
                        {title}
                    </button>
                </h3>
            </template>
            <template lwc:else>
                <h4 class="fr-accordion__title">
                    <button class="fr-accordion__btn"   aria-label={ariaLabel}
                            aria-controls="accordion"   aria-expanded={ariaExpanded}
                            onclick={expandCollapse}>
                        {title}
                    </button>
                </h4>
            </template>

            <div class={sectionClass} id="accordion">
                <section class={finalExcerptClass}>
                    <lightning-formatted-text class={excerptClass} value={excerpt} linkify>
                    </lightning-formatted-text>
                </section>
                <div class={messageClass}>
                    <lightning-formatted-rich-text class={messageClass} value={message}>
                    </lightning-formatted-rich-text>
                </div>
                <slot name="foldableSection"></slot>
            </div>
        </section>
    </template>

    <!-- Standard variant display -->
    <template lwc:else>
        <article class={wrappingClass}>
            <template lwc:if={title}>
                <template lwc:if={isH2}>
                    <h2 class={titleClass}>
                        <lightning-formatted-text class={titleClass} value={title} linkify>
                        </lightning-formatted-text>
                    </h2>
                </template>
                <template lwc:elseif={isH1}>
                    <h1 class={titleClass}>
                        <lightning-formatted-text class={titleClass} value={title} linkify>
                        </lightning-formatted-text>
                    </h1>
                </template>
                <template lwc:elseif={isH3}>
                    <h3 class={titleClass}>
                        <lightning-formatted-text class={titleClass} value={title} linkify>
                        </lightning-formatted-text>
                    </h3>
                </template>
                <template lwc:else>
                    <h4 class={titleClass}>
                        <lightning-formatted-text class={titleClass} value={title} linkify>
                        </lightning-formatted-text>
                    </h4>
                </template>
            </template>
            <template lwc:if={excerpt}>
                <section class={finalExcerptClass}>
                    <lightning-formatted-text class={excerptClass} value={excerpt} linkify>
                    </lightning-formatted-text>
                </section>
            </template>
            <template lwc:if={message}>
                <section class={messageClass}>
                    <lightning-formatted-rich-text class={messageClass} value={message}>
                    </lightning-formatted-rich-text>
                </section>
            </template>
        </article>
    </template>

    <template lwc:if={isDebug}>
        <div class={wrappingCss}>
            <p class="fr-py-4v">
                <span class="fr-badge fr-badge--warning  fr-mr-4v">
                    Mode debug activ√©!
                </span>
                <span class="fr-badge fr-badge--info">
                    <a href="https://github.com/pegros/DSFR_LWR/blob/master/help/dsfrContainerDsp.md" target="_blank">
                        Voir la documentation</a>
                </span>
            </p>
        </div>
    </template>

</template>